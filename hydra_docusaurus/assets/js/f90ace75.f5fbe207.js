"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4597],{4885:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"hydra-js-client/kuber-provider/buildWithWallet","title":"buildWithWallet","description":"buildWithWallet is an asynchronous function that builds a transaction by automatically adding available UTxOs from the wallet to the available UTxO selection.","source":"@site/docs/hydra-js-client/kuber-provider/buildWithWallet.md","sourceDirName":"hydra-js-client/kuber-provider","slug":"/hydra-js-client/kuber-provider/buildWithWallet","permalink":"/kuber/hydra_docusaurus/docs/hydra-js-client/kuber-provider/buildWithWallet","draft":false,"unlisted":false,"editUrl":"https://github.com/dQuadrant/kuber/tree/feat/hydra/docs/hydra-js-client/kuber-provider/buildWithWallet.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"buildWithWallet"},"sidebar":"hydraJsClient","previous":{"title":"submitTx","permalink":"/kuber/hydra_docusaurus/docs/hydra-js-client/submitTx"},"next":{"title":"buildAndSignWithWallet","permalink":"/kuber/hydra_docusaurus/docs/hydra-js-client/kuber-provider/buildAndSignWithWallet"}}');var i=n(4848),r=n(8453);const a={sidebar_position:4,sidebar_label:"buildWithWallet"},s="buildWithWallet",d={},o=[{value:"Function Signature",id:"function-signature",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Returns",id:"returns",level:2},{value:"Example",id:"example",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"buildwithwallet",children:"buildWithWallet"})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"buildWithWallet"})," is an asynchronous function that builds a transaction by automatically adding available UTxOs from the wallet to the available UTxO selection."]}),"\n",(0,i.jsx)(t.h2,{id:"function-signature",children:"Function Signature"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"async buildWithWallet(\n  cip30OrProvider: Cip30 | Cip30Provider,\n  buildRequest: Record<string, any>,\n  autoAddCollateral = false,\n  estimatedSpending?: number | bigint,\n): Promise<CommonTxObject>\n"})}),"\n",(0,i.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"cip30OrProvider"}),": A CIP-30 compatible wallet instance or provider."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"buildRequest"}),": An object following Kuber's transaction builder JSON specification. For a comprehensive reference on transaction builder fields and their usage, please refer to the ",(0,i.jsx)(t.a,{href:"https://kuberide.com/kuber/docs/tx-builder-reference",children:"KuberIDE TxBuilder Object Reference"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"autoAddCollateral"}),": An optional ",(0,i.jsx)(t.code,{children:"boolean"})," indicating whether to automatically add collateral from the provider. Defaults to ",(0,i.jsx)(t.code,{children:"false"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"estimatedSpending"}),": An optional ",(0,i.jsx)(t.code,{children:"number"})," or ",(0,i.jsx)(t.code,{children:"bigint"})," representing the estimated amount of Lovelace to be spent."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"returns",children:"Returns"}),"\n",(0,i.jsxs)(t.p,{children:["A ",(0,i.jsx)(t.code,{children:"Promise"})," that resolves to a ",(0,i.jsx)(t.code,{children:"CommonTxObject"})," representing the built transaction."]}),"\n",(0,i.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:'import { KuberHydraApiProvider } from "kuber-client";\nimport { loadCrypto, Ed25519Key } from "libcardano";\nimport { ShelleyWallet, Cip30ShelleyWallet } from "libcardano-wallet";\nimport { readFileSync } from "fs";\n\nasync function main() {\n  await loadCrypto();\n\n  const hydra = new KuberHydraApiProvider("http://localhost:8081"); // Replace with your Hydra API URL\n\n  // Load test wallet signing key\n  const testWalletSigningKey = await Ed25519Key.fromCardanoCliJson(\n    JSON.parse(readFileSync(process.env.HOME + "/.cardano/preview/hydra-0/credentials/funds.sk", "utf-8")),\n  );\n\n  // Setup libcardano crypto and Shelley wallet\n  const shelleyWallet = new ShelleyWallet(testWalletSigningKey);\n  const cip30Wallet = new Cip30ShelleyWallet(hydra, hydra, shelleyWallet, 0);\n  const walletAddress = (await cip30Wallet.getChangeAddress()).toBech32();\n\n  const transaction = {\n    outputs: [{ address: walletAddress, value: "1_000_000" }], // Sending 1 ADA\n    changeAddress: walletAddress,\n  };\n\n  try {\n    console.log("Building transaction with wallet...");\n    const builtTx = await hydra.buildWithWallet(cip30Wallet, transaction);\n    console.log("Built transaction:", builtTx);\n  } catch (error) {\n    console.error("Error building transaction with wallet:", error);\n  }\n}\n\nmain();\n'})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var l=n(6540);const i={},r=l.createContext(i);function a(e){const t=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),l.createElement(r.Provider,{value:t},e.children)}}}]);