"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1642],{3027:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"hydra-js-client/kuber-provider/buildAndSubmitWithWallet","title":"buildAndSubmitWithWallet","description":"buildAndSubmitWithWallet is an asynchronous function that automatically addes utxos from wallet to the transaction, signs, and submits the transaction to the chain using the provided CIP-30 compatible wallet.","source":"@site/docs/hydra-js-client/kuber-provider/buildAndSubmitWithWallet.md","sourceDirName":"hydra-js-client/kuber-provider","slug":"/hydra-js-client/kuber-provider/buildAndSubmitWithWallet","permalink":"/kuber/hydra_docusaurus/docs/hydra-js-client/kuber-provider/buildAndSubmitWithWallet","draft":false,"unlisted":false,"editUrl":"https://github.com/dQuadrant/kuber/tree/feat/hydra/docs/hydra-js-client/kuber-provider/buildAndSubmitWithWallet.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"sidebar_label":"buildAndSubmitWithWallet"},"sidebar":"hydraJsClient","previous":{"title":"buildAndSignWithWallet","permalink":"/kuber/hydra_docusaurus/docs/hydra-js-client/kuber-provider/buildAndSignWithWallet"},"next":{"title":"waitForUtxoConsumption","permalink":"/kuber/hydra_docusaurus/docs/hydra-js-client/kuber-provider/waitForUtxoConsumption"}}');var r=n(4848),l=n(8453);const a={sidebar_position:6,sidebar_label:"buildAndSubmitWithWallet"},s="buildAndSubmitWithWallet",d={},o=[{value:"Function Signature",id:"function-signature",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Returns",id:"returns",level:2},{value:"Example",id:"example",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"buildandsubmitwithwallet",children:"buildAndSubmitWithWallet"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"buildAndSubmitWithWallet"})," is an asynchronous function that automatically addes utxos from wallet to the transaction, signs, and submits the transaction to the chain using the provided CIP-30 compatible wallet."]}),"\n",(0,r.jsx)(t.h2,{id:"function-signature",children:"Function Signature"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"async buildAndSubmitWithWallet(\n  cip30OrProvider: Cip30 | Cip30Provider,\n  buildRequest: Record<string, any>,\n  autoAddCollateral = false,\n  estimatedSpending?: number | bigint,\n): Promise<HexString>\n"})}),"\n",(0,r.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"cip30OrProvider"}),": A CIP-30 compatible wallet instance or provider."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"buildRequest"}),": An object following Kuber's transaction builder JSON specification. For a comprehensive reference on transaction builder fields and their usage, please refer to the ",(0,r.jsx)(t.a,{href:"https://kuberide.com/kuber/docs/tx-builder-reference",children:"KuberIDE TxBuilder Object Reference"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"autoAddCollateral"}),": An optional ",(0,r.jsx)(t.code,{children:"boolean"})," indicating whether to automatically add collateral from the provider. Defaults to ",(0,r.jsx)(t.code,{children:"false"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"estimatedSpending"}),": An optional ",(0,r.jsx)(t.code,{children:"number"})," or ",(0,r.jsx)(t.code,{children:"bigint"})," representing the estimated amount of Lovelace to be spent."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.code,{children:"Promise"})," that resolves to a ",(0,r.jsx)(t.code,{children:"HexString"})," representing the submitted transaction's hash."]}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'import { KuberHydraApiProvider } from "kuber-client";\nimport { loadCrypto, Ed25519Key } from "libcardano";\nimport { ShelleyWallet, Cip30ShelleyWallet } from "libcardano-wallet";\nimport { readFileSync } from "fs";\n\nasync function main() {\n  await loadCrypto();\n\n  const hydra = new KuberHydraApiProvider("http://localhost:8081"); // Replace with your Hydra API URL\n\n  // Load test wallet signing key\n  const testWalletSigningKey = await Ed25519Key.fromCardanoCliJson(\n    JSON.parse(readFileSync(process.env.HOME + "/.cardano/preview/hydra-0/credentials/funds.sk", "utf-8")),\n  );\n\n  // Setup libcardano crypto and Shelley wallet\n  const shelleyWallet = new ShelleyWallet(testWalletSigningKey);\n  const cip30Wallet = new Cip30ShelleyWallet(hydra, hydra, shelleyWallet, 0);\n  const walletAddress = (await cip30Wallet.getChangeAddress()).toBech32();\n\n  const transaction = {\n    outputs: [{ address: walletAddress, value: "1_000_000" }], // Sending 1 ADA\n    changeAddress: walletAddress,\n  };\n\n  try {\n    console.log("Building, signing, and submitting transaction with wallet...");\n    const txHash = await hydra.buildAndSubmitWithWallet(cip30Wallet, transaction);\n    console.log("Transaction submitted. Hash:", txHash);\n  } catch (error) {\n    console.error("Error building, signing, and submitting transaction with wallet:", error);\n  }\n}\n\nmain();\n'})})]})}function u(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var i=n(6540);const r={},l=i.createContext(r);function a(e){const t=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);